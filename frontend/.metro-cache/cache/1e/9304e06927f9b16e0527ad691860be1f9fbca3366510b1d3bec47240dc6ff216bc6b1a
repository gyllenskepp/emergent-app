{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":52,"index":105}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":38,"index":144}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":186},"end":{"line":5,"column":39,"index":225}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../stores/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":226},"end":{"line":6,"column":51,"index":277}}],"key":"xZ94Y9XSSJKgtl1T0/yiI2QWZsY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.usePushNotifications = usePushNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storesAuthStore = require(_dependencyMap[5], \"../stores/authStore\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function usePushNotifications() {\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    const {\n      updatePushToken,\n      isAuthenticated\n    } = (0, _storesAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync().then(token => {\n        if (token) {\n          setExpoPushToken(token);\n          if (isAuthenticated) {\n            updatePushToken(token);\n          }\n        }\n      });\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        setNotification(notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n        // Handle navigation based on notification data\n        const data = response.notification.request.content.data;\n        if (data?.event_id) {\n          // Navigate to event\n        } else if (data?.news_id) {\n          // Navigate to news\n        }\n      });\n      return () => {\n        if (notificationListener.current) {\n          Notifications.removeNotificationSubscription(notificationListener.current);\n        }\n        if (responseListener.current) {\n          Notifications.removeNotificationSubscription(responseListener.current);\n        }\n      };\n    }, [isAuthenticated]);\n    return {\n      expoPushToken,\n      notification\n    };\n  }\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#E63946'\n      });\n    }\n    if (Device.isDevice) {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Push notifications permission not granted');\n        return null;\n      }\n      try {\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (projectId) {\n          const pushToken = await Notifications.getExpoPushTokenAsync({\n            projectId\n          });\n          token = pushToken.data;\n        } else {\n          // Fallback for development\n          const pushToken = await Notifications.getExpoPushTokenAsync();\n          token = pushToken.data;\n        }\n      } catch (error) {\n        console.log('Error getting push token:', error);\n      }\n    } else {\n      console.log('Must use physical device for Push Notifications');\n    }\n    return token;\n  }\n});","lineCount":135,"map":[[27,2,16,0,"exports"],[27,9,16,0],[27,10,16,0,"usePushNotifications"],[27,30,16,0],[27,33,16,0,"usePushNotifications"],[27,53,16,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoNotifications"],[29,24,2,0],[29,27,2,0,"require"],[29,34,2,0],[29,35,2,0,"_dependencyMap"],[29,49,2,0],[30,2,2,0],[30,6,2,0,"Notifications"],[30,19,2,0],[30,22,2,0,"_interopNamespace"],[30,39,2,0],[30,40,2,0,"_expoNotifications"],[30,58,2,0],[31,2,3,0],[31,6,3,0,"_expoDevice"],[31,17,3,0],[31,20,3,0,"require"],[31,27,3,0],[31,28,3,0,"_dependencyMap"],[31,42,3,0],[32,2,3,0],[32,6,3,0,"Device"],[32,12,3,0],[32,15,3,0,"_interopNamespace"],[32,32,3,0],[32,33,3,0,"_expoDevice"],[32,44,3,0],[33,2,3,38],[33,6,3,38,"_reactNativeWebDistExportsPlatform"],[33,40,3,38],[33,43,3,38,"require"],[33,50,3,38],[33,51,3,38,"_dependencyMap"],[33,65,3,38],[34,2,3,38],[34,6,3,38,"Platform"],[34,14,3,38],[34,17,3,38,"_interopDefault"],[34,32,3,38],[34,33,3,38,"_reactNativeWebDistExportsPlatform"],[34,67,3,38],[35,2,5,0],[35,6,5,0,"_expoConstants"],[35,20,5,0],[35,23,5,0,"require"],[35,30,5,0],[35,31,5,0,"_dependencyMap"],[35,45,5,0],[36,2,5,0],[36,6,5,0,"Constants"],[36,15,5,0],[36,18,5,0,"_interopDefault"],[36,33,5,0],[36,34,5,0,"_expoConstants"],[36,48,5,0],[37,2,6,0],[37,6,6,0,"_storesAuthStore"],[37,22,6,0],[37,25,6,0,"require"],[37,32,6,0],[37,33,6,0,"_dependencyMap"],[37,47,6,0],[38,2,8,0,"Notifications"],[38,15,8,13],[38,16,8,14,"setNotificationHandler"],[38,38,8,36],[38,39,8,37],[39,4,9,2,"handleNotification"],[39,22,9,20],[39,24,9,22],[39,30,9,22,"handleNotification"],[39,31,9,22],[39,37,9,35],[40,6,10,4,"shouldShowAlert"],[40,21,10,19],[40,23,10,21],[40,27,10,25],[41,6,11,4,"shouldPlaySound"],[41,21,11,19],[41,23,11,21],[41,27,11,25],[42,6,12,4,"shouldSetBadge"],[42,20,12,18],[42,22,12,20],[43,4,13,2],[43,5,13,3],[44,2,14,0],[44,3,14,1],[44,4,14,2],[45,2,16,7],[45,11,16,16,"usePushNotifications"],[45,31,16,36,"usePushNotifications"],[45,32,16,36],[45,34,16,39],[46,4,17,2],[46,10,17,8],[46,11,17,9,"expoPushToken"],[46,24,17,22],[46,26,17,24,"setExpoPushToken"],[46,42,17,40],[46,43,17,41],[46,46,17,44],[46,50,17,44,"useState"],[46,56,17,52],[46,57,17,52,"useState"],[46,65,17,52],[46,67,17,68],[46,71,17,72],[46,72,17,73],[47,4,18,2],[47,10,18,8],[47,11,18,9,"notification"],[47,23,18,21],[47,25,18,23,"setNotification"],[47,40,18,38],[47,41,18,39],[47,44,18,42],[47,48,18,42,"useState"],[47,54,18,50],[47,55,18,50,"useState"],[47,63,18,50],[47,65,18,86],[47,69,18,90],[47,70,18,91],[48,4,19,2],[48,10,19,8,"notificationListener"],[48,30,19,28],[48,33,19,31],[48,37,19,31,"useRef"],[48,43,19,37],[48,44,19,37,"useRef"],[48,50,19,37],[48,52,19,71],[48,53,19,72],[49,4,20,2],[49,10,20,8,"responseListener"],[49,26,20,24],[49,29,20,27],[49,33,20,27,"useRef"],[49,39,20,33],[49,40,20,33,"useRef"],[49,46,20,33],[49,48,20,67],[49,49,20,68],[50,4,21,2],[50,10,21,8],[51,6,21,10,"updatePushToken"],[51,21,21,25],[52,6,21,27,"isAuthenticated"],[53,4,21,43],[53,5,21,44],[53,8,21,47],[53,12,21,47,"useAuthStore"],[53,28,21,59],[53,29,21,59,"useAuthStore"],[53,41,21,59],[53,43,21,60],[53,44,21,61],[54,4,23,2],[54,8,23,2,"useEffect"],[54,14,23,11],[54,15,23,11,"useEffect"],[54,24,23,11],[54,26,23,12],[54,32,23,18],[55,6,24,4,"registerForPushNotificationsAsync"],[55,39,24,37],[55,40,24,38],[55,41,24,39],[55,42,24,40,"then"],[55,46,24,44],[55,47,24,45,"token"],[55,52,24,50],[55,56,24,54],[56,8,25,6],[56,12,25,10,"token"],[56,17,25,15],[56,19,25,17],[57,10,26,8,"setExpoPushToken"],[57,26,26,24],[57,27,26,25,"token"],[57,32,26,30],[57,33,26,31],[58,10,27,8],[58,14,27,12,"isAuthenticated"],[58,29,27,27],[58,31,27,29],[59,12,28,10,"updatePushToken"],[59,27,28,25],[59,28,28,26,"token"],[59,33,28,31],[59,34,28,32],[60,10,29,8],[61,8,30,6],[62,6,31,4],[62,7,31,5],[62,8,31,6],[63,6,33,4,"notificationListener"],[63,26,33,24],[63,27,33,25,"current"],[63,34,33,32],[63,37,33,35,"Notifications"],[63,50,33,48],[63,51,33,49,"addNotificationReceivedListener"],[63,82,33,80],[63,83,33,81,"notification"],[63,95,33,93],[63,99,33,97],[64,8,34,6,"setNotification"],[64,23,34,21],[64,24,34,22,"notification"],[64,36,34,34],[64,37,34,35],[65,6,35,4],[65,7,35,5],[65,8,35,6],[66,6,37,4,"responseListener"],[66,22,37,20],[66,23,37,21,"current"],[66,30,37,28],[66,33,37,31,"Notifications"],[66,46,37,44],[66,47,37,45,"addNotificationResponseReceivedListener"],[66,86,37,84],[66,87,37,85,"response"],[66,95,37,93],[66,99,37,97],[67,8,38,6,"console"],[67,15,38,13],[67,16,38,14,"log"],[67,19,38,17],[67,20,38,18],[67,44,38,42],[67,46,38,44,"response"],[67,54,38,52],[67,55,38,53],[68,8,39,6],[69,8,40,6],[69,14,40,12,"data"],[69,18,40,16],[69,21,40,19,"response"],[69,29,40,27],[69,30,40,28,"notification"],[69,42,40,40],[69,43,40,41,"request"],[69,50,40,48],[69,51,40,49,"content"],[69,58,40,56],[69,59,40,57,"data"],[69,63,40,61],[70,8,41,6],[70,12,41,10,"data"],[70,16,41,14],[70,18,41,16,"event_id"],[70,26,41,24],[70,28,41,26],[71,10,42,8],[72,8,42,8],[72,9,43,7],[72,15,43,13],[72,19,43,17,"data"],[72,23,43,21],[72,25,43,23,"news_id"],[72,32,43,30],[72,34,43,32],[73,10,44,8],[74,8,44,8],[75,6,46,4],[75,7,46,5],[75,8,46,6],[76,6,48,4],[76,13,48,11],[76,19,48,17],[77,8,49,6],[77,12,49,10,"notificationListener"],[77,32,49,30],[77,33,49,31,"current"],[77,40,49,38],[77,42,49,40],[78,10,50,8,"Notifications"],[78,23,50,21],[78,24,50,22,"removeNotificationSubscription"],[78,54,50,52],[78,55,50,53,"notificationListener"],[78,75,50,73],[78,76,50,74,"current"],[78,83,50,81],[78,84,50,82],[79,8,51,6],[80,8,52,6],[80,12,52,10,"responseListener"],[80,28,52,26],[80,29,52,27,"current"],[80,36,52,34],[80,38,52,36],[81,10,53,8,"Notifications"],[81,23,53,21],[81,24,53,22,"removeNotificationSubscription"],[81,54,53,52],[81,55,53,53,"responseListener"],[81,71,53,69],[81,72,53,70,"current"],[81,79,53,77],[81,80,53,78],[82,8,54,6],[83,6,55,4],[83,7,55,5],[84,4,56,2],[84,5,56,3],[84,7,56,5],[84,8,56,6,"isAuthenticated"],[84,23,56,21],[84,24,56,22],[84,25,56,23],[85,4,58,2],[85,11,58,9],[86,6,58,11,"expoPushToken"],[86,19,58,24],[87,6,58,26,"notification"],[88,4,58,39],[88,5,58,40],[89,2,59,0],[90,2,61,0],[90,17,61,15,"registerForPushNotificationsAsync"],[90,50,61,48,"registerForPushNotificationsAsync"],[90,51,61,48],[90,53,61,75],[91,4,62,2],[91,8,62,6,"token"],[91,13,62,26],[91,16,62,29],[91,20,62,33],[92,4,64,2],[92,8,64,6,"Platform"],[92,16,64,14],[92,17,64,14,"default"],[92,24,64,14],[92,25,64,15,"OS"],[92,27,64,17],[92,32,64,22],[92,41,64,31],[92,43,64,33],[93,6,65,4],[93,12,65,10,"Notifications"],[93,25,65,23],[93,26,65,24,"setNotificationChannelAsync"],[93,53,65,51],[93,54,65,52],[93,63,65,61],[93,65,65,63],[94,8,66,6,"name"],[94,12,66,10],[94,14,66,12],[94,23,66,21],[95,8,67,6,"importance"],[95,18,67,16],[95,20,67,18,"Notifications"],[95,33,67,31],[95,34,67,32,"AndroidImportance"],[95,51,67,49],[95,52,67,50,"MAX"],[95,55,67,53],[96,8,68,6,"vibrationPattern"],[96,24,68,22],[96,26,68,24],[96,27,68,25],[96,28,68,26],[96,30,68,28],[96,33,68,31],[96,35,68,33],[96,38,68,36],[96,40,68,38],[96,43,68,41],[96,44,68,42],[97,8,69,6,"lightColor"],[97,18,69,16],[97,20,69,18],[98,6,70,4],[98,7,70,5],[98,8,70,6],[99,4,71,2],[100,4,73,2],[100,8,73,6,"Device"],[100,14,73,12],[100,15,73,13,"isDevice"],[100,23,73,21],[100,25,73,23],[101,6,74,4],[101,12,74,10],[102,8,74,12,"status"],[102,14,74,18],[102,16,74,20,"existingStatus"],[103,6,74,35],[103,7,74,36],[103,10,74,39],[103,16,74,45,"Notifications"],[103,29,74,58],[103,30,74,59,"getPermissionsAsync"],[103,49,74,78],[103,50,74,79],[103,51,74,80],[104,6,75,4],[104,10,75,8,"finalStatus"],[104,21,75,19],[104,24,75,22,"existingStatus"],[104,38,75,36],[105,6,77,4],[105,10,77,8,"existingStatus"],[105,24,77,22],[105,29,77,27],[105,38,77,36],[105,40,77,38],[106,8,78,6],[106,14,78,12],[107,10,78,14,"status"],[108,8,78,21],[108,9,78,22],[108,12,78,25],[108,18,78,31,"Notifications"],[108,31,78,44],[108,32,78,45,"requestPermissionsAsync"],[108,55,78,68],[108,56,78,69],[108,57,78,70],[109,8,79,6,"finalStatus"],[109,19,79,17],[109,22,79,20,"status"],[109,28,79,26],[110,6,80,4],[111,6,82,4],[111,10,82,8,"finalStatus"],[111,21,82,19],[111,26,82,24],[111,35,82,33],[111,37,82,35],[112,8,83,6,"console"],[112,15,83,13],[112,16,83,14,"log"],[112,19,83,17],[112,20,83,18],[112,63,83,61],[112,64,83,62],[113,8,84,6],[113,15,84,13],[113,19,84,17],[114,6,85,4],[115,6,87,4],[115,10,87,8],[116,8,88,6],[116,14,88,12,"projectId"],[116,23,88,21],[116,26,88,24,"Constants"],[116,35,88,33],[116,36,88,33,"default"],[116,43,88,33],[116,44,88,34,"expoConfig"],[116,54,88,44],[116,56,88,46,"extra"],[116,61,88,51],[116,63,88,53,"eas"],[116,66,88,56],[116,68,88,58,"projectId"],[116,77,88,67],[117,8,89,6],[117,12,89,10,"projectId"],[117,21,89,19],[117,23,89,21],[118,10,90,8],[118,16,90,14,"pushToken"],[118,25,90,23],[118,28,90,26],[118,34,90,32,"Notifications"],[118,47,90,45],[118,48,90,46,"getExpoPushTokenAsync"],[118,69,90,67],[118,70,90,68],[119,12,90,70,"projectId"],[120,10,90,80],[120,11,90,81],[120,12,90,82],[121,10,91,8,"token"],[121,15,91,13],[121,18,91,16,"pushToken"],[121,27,91,25],[121,28,91,26,"data"],[121,32,91,30],[122,8,92,6],[122,9,92,7],[122,15,92,13],[123,10,93,8],[124,10,94,8],[124,16,94,14,"pushToken"],[124,25,94,23],[124,28,94,26],[124,34,94,32,"Notifications"],[124,47,94,45],[124,48,94,46,"getExpoPushTokenAsync"],[124,69,94,67],[124,70,94,68],[124,71,94,69],[125,10,95,8,"token"],[125,15,95,13],[125,18,95,16,"pushToken"],[125,27,95,25],[125,28,95,26,"data"],[125,32,95,30],[126,8,96,6],[127,6,97,4],[127,7,97,5],[127,8,97,6],[127,15,97,13,"error"],[127,20,97,18],[127,22,97,20],[128,8,98,6,"console"],[128,15,98,13],[128,16,98,14,"log"],[128,19,98,17],[128,20,98,18],[128,47,98,45],[128,49,98,47,"error"],[128,54,98,52],[128,55,98,53],[129,6,99,4],[130,4,100,2],[130,5,100,3],[130,11,100,9],[131,6,101,4,"console"],[131,13,101,11],[131,14,101,12,"log"],[131,17,101,15],[131,18,101,16],[131,67,101,65],[131,68,101,66],[132,4,102,2],[133,4,104,2],[133,11,104,9,"token"],[133,16,104,14],[134,2,105,0],[135,0,105,1],[135,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","usePushNotifications","useEffect$argument_0","registerForPushNotificationsAsync.then$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCQ;IDI;OEG;YCO;6CCC;KDO;iFEE;KFE;qFGE;KHS;WIE;KJO;GDC;CFG;AQE;CR4C"},"hasCjsExports":false},"type":"js/module"}]}