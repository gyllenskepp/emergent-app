{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":52,"index":105}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":38,"index":144}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":186},"end":{"line":5,"column":39,"index":225}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../stores/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":226},"end":{"line":6,"column":51,"index":277}}],"key":"xZ94Y9XSSJKgtl1T0/yiI2QWZsY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.usePushNotifications = usePushNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storesAuthStore = require(_dependencyMap[5], \"../stores/authStore\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function usePushNotifications() {\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    const {\n      updatePushToken,\n      isAuthenticated\n    } = (0, _storesAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync().then(token => {\n        if (token) {\n          setExpoPushToken(token);\n          if (isAuthenticated) {\n            updatePushToken(token);\n          }\n        }\n      });\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        setNotification(notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n        // Handle navigation based on notification data\n        const data = response.notification.request.content.data;\n        if (data?.event_id) {\n          // Navigate to event\n        } else if (data?.news_id) {\n          // Navigate to news\n        }\n      });\n      return () => {\n        // removeNotificationSubscription is not available on web\n        if (Platform.default.OS !== 'web') {\n          if (notificationListener.current) {\n            Notifications.removeNotificationSubscription(notificationListener.current);\n          }\n          if (responseListener.current) {\n            Notifications.removeNotificationSubscription(responseListener.current);\n          }\n        }\n      };\n    }, [isAuthenticated]);\n    return {\n      expoPushToken,\n      notification\n    };\n  }\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#E63946'\n      });\n    }\n    if (Device.isDevice) {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Push notifications permission not granted');\n        return null;\n      }\n      try {\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (projectId) {\n          const pushToken = await Notifications.getExpoPushTokenAsync({\n            projectId\n          });\n          token = pushToken.data;\n        } else {\n          // Fallback for development\n          const pushToken = await Notifications.getExpoPushTokenAsync();\n          token = pushToken.data;\n        }\n      } catch (error) {\n        console.log('Error getting push token:', error);\n      }\n    } else {\n      console.log('Must use physical device for Push Notifications');\n    }\n    return token;\n  }\n});","lineCount":138,"map":[[27,2,16,0,"exports"],[27,9,16,0],[27,10,16,0,"usePushNotifications"],[27,30,16,0],[27,33,16,0,"usePushNotifications"],[27,53,16,0],[28,2,1,0],[28,6,1,0,"_react"],[28,12,1,0],[28,15,1,0,"require"],[28,22,1,0],[28,23,1,0,"_dependencyMap"],[28,37,1,0],[29,2,2,0],[29,6,2,0,"_expoNotifications"],[29,24,2,0],[29,27,2,0,"require"],[29,34,2,0],[29,35,2,0,"_dependencyMap"],[29,49,2,0],[30,2,2,0],[30,6,2,0,"Notifications"],[30,19,2,0],[30,22,2,0,"_interopNamespace"],[30,39,2,0],[30,40,2,0,"_expoNotifications"],[30,58,2,0],[31,2,3,0],[31,6,3,0,"_expoDevice"],[31,17,3,0],[31,20,3,0,"require"],[31,27,3,0],[31,28,3,0,"_dependencyMap"],[31,42,3,0],[32,2,3,0],[32,6,3,0,"Device"],[32,12,3,0],[32,15,3,0,"_interopNamespace"],[32,32,3,0],[32,33,3,0,"_expoDevice"],[32,44,3,0],[33,2,3,38],[33,6,3,38,"_reactNativeWebDistExportsPlatform"],[33,40,3,38],[33,43,3,38,"require"],[33,50,3,38],[33,51,3,38,"_dependencyMap"],[33,65,3,38],[34,2,3,38],[34,6,3,38,"Platform"],[34,14,3,38],[34,17,3,38,"_interopDefault"],[34,32,3,38],[34,33,3,38,"_reactNativeWebDistExportsPlatform"],[34,67,3,38],[35,2,5,0],[35,6,5,0,"_expoConstants"],[35,20,5,0],[35,23,5,0,"require"],[35,30,5,0],[35,31,5,0,"_dependencyMap"],[35,45,5,0],[36,2,5,0],[36,6,5,0,"Constants"],[36,15,5,0],[36,18,5,0,"_interopDefault"],[36,33,5,0],[36,34,5,0,"_expoConstants"],[36,48,5,0],[37,2,6,0],[37,6,6,0,"_storesAuthStore"],[37,22,6,0],[37,25,6,0,"require"],[37,32,6,0],[37,33,6,0,"_dependencyMap"],[37,47,6,0],[38,2,8,0,"Notifications"],[38,15,8,13],[38,16,8,14,"setNotificationHandler"],[38,38,8,36],[38,39,8,37],[39,4,9,2,"handleNotification"],[39,22,9,20],[39,24,9,22],[39,30,9,22,"handleNotification"],[39,31,9,22],[39,37,9,35],[40,6,10,4,"shouldShowAlert"],[40,21,10,19],[40,23,10,21],[40,27,10,25],[41,6,11,4,"shouldPlaySound"],[41,21,11,19],[41,23,11,21],[41,27,11,25],[42,6,12,4,"shouldSetBadge"],[42,20,12,18],[42,22,12,20],[43,4,13,2],[43,5,13,3],[44,2,14,0],[44,3,14,1],[44,4,14,2],[45,2,16,7],[45,11,16,16,"usePushNotifications"],[45,31,16,36,"usePushNotifications"],[45,32,16,36],[45,34,16,39],[46,4,17,2],[46,10,17,8],[46,11,17,9,"expoPushToken"],[46,24,17,22],[46,26,17,24,"setExpoPushToken"],[46,42,17,40],[46,43,17,41],[46,46,17,44],[46,50,17,44,"useState"],[46,56,17,52],[46,57,17,52,"useState"],[46,65,17,52],[46,67,17,68],[46,71,17,72],[46,72,17,73],[47,4,18,2],[47,10,18,8],[47,11,18,9,"notification"],[47,23,18,21],[47,25,18,23,"setNotification"],[47,40,18,38],[47,41,18,39],[47,44,18,42],[47,48,18,42,"useState"],[47,54,18,50],[47,55,18,50,"useState"],[47,63,18,50],[47,65,18,86],[47,69,18,90],[47,70,18,91],[48,4,19,2],[48,10,19,8,"notificationListener"],[48,30,19,28],[48,33,19,31],[48,37,19,31,"useRef"],[48,43,19,37],[48,44,19,37,"useRef"],[48,50,19,37],[48,52,19,71],[48,53,19,72],[49,4,20,2],[49,10,20,8,"responseListener"],[49,26,20,24],[49,29,20,27],[49,33,20,27,"useRef"],[49,39,20,33],[49,40,20,33,"useRef"],[49,46,20,33],[49,48,20,67],[49,49,20,68],[50,4,21,2],[50,10,21,8],[51,6,21,10,"updatePushToken"],[51,21,21,25],[52,6,21,27,"isAuthenticated"],[53,4,21,43],[53,5,21,44],[53,8,21,47],[53,12,21,47,"useAuthStore"],[53,28,21,59],[53,29,21,59,"useAuthStore"],[53,41,21,59],[53,43,21,60],[53,44,21,61],[54,4,23,2],[54,8,23,2,"useEffect"],[54,14,23,11],[54,15,23,11,"useEffect"],[54,24,23,11],[54,26,23,12],[54,32,23,18],[55,6,24,4,"registerForPushNotificationsAsync"],[55,39,24,37],[55,40,24,38],[55,41,24,39],[55,42,24,40,"then"],[55,46,24,44],[55,47,24,45,"token"],[55,52,24,50],[55,56,24,54],[56,8,25,6],[56,12,25,10,"token"],[56,17,25,15],[56,19,25,17],[57,10,26,8,"setExpoPushToken"],[57,26,26,24],[57,27,26,25,"token"],[57,32,26,30],[57,33,26,31],[58,10,27,8],[58,14,27,12,"isAuthenticated"],[58,29,27,27],[58,31,27,29],[59,12,28,10,"updatePushToken"],[59,27,28,25],[59,28,28,26,"token"],[59,33,28,31],[59,34,28,32],[60,10,29,8],[61,8,30,6],[62,6,31,4],[62,7,31,5],[62,8,31,6],[63,6,33,4,"notificationListener"],[63,26,33,24],[63,27,33,25,"current"],[63,34,33,32],[63,37,33,35,"Notifications"],[63,50,33,48],[63,51,33,49,"addNotificationReceivedListener"],[63,82,33,80],[63,83,33,81,"notification"],[63,95,33,93],[63,99,33,97],[64,8,34,6,"setNotification"],[64,23,34,21],[64,24,34,22,"notification"],[64,36,34,34],[64,37,34,35],[65,6,35,4],[65,7,35,5],[65,8,35,6],[66,6,37,4,"responseListener"],[66,22,37,20],[66,23,37,21,"current"],[66,30,37,28],[66,33,37,31,"Notifications"],[66,46,37,44],[66,47,37,45,"addNotificationResponseReceivedListener"],[66,86,37,84],[66,87,37,85,"response"],[66,95,37,93],[66,99,37,97],[67,8,38,6,"console"],[67,15,38,13],[67,16,38,14,"log"],[67,19,38,17],[67,20,38,18],[67,44,38,42],[67,46,38,44,"response"],[67,54,38,52],[67,55,38,53],[68,8,39,6],[69,8,40,6],[69,14,40,12,"data"],[69,18,40,16],[69,21,40,19,"response"],[69,29,40,27],[69,30,40,28,"notification"],[69,42,40,40],[69,43,40,41,"request"],[69,50,40,48],[69,51,40,49,"content"],[69,58,40,56],[69,59,40,57,"data"],[69,63,40,61],[70,8,41,6],[70,12,41,10,"data"],[70,16,41,14],[70,18,41,16,"event_id"],[70,26,41,24],[70,28,41,26],[71,10,42,8],[72,8,42,8],[72,9,43,7],[72,15,43,13],[72,19,43,17,"data"],[72,23,43,21],[72,25,43,23,"news_id"],[72,32,43,30],[72,34,43,32],[73,10,44,8],[74,8,44,8],[75,6,46,4],[75,7,46,5],[75,8,46,6],[76,6,48,4],[76,13,48,11],[76,19,48,17],[77,8,49,6],[78,8,50,6],[78,12,50,10,"Platform"],[78,20,50,18],[78,21,50,18,"default"],[78,28,50,18],[78,29,50,19,"OS"],[78,31,50,21],[78,36,50,26],[78,41,50,31],[78,43,50,33],[79,10,51,8],[79,14,51,12,"notificationListener"],[79,34,51,32],[79,35,51,33,"current"],[79,42,51,40],[79,44,51,42],[80,12,52,10,"Notifications"],[80,25,52,23],[80,26,52,24,"removeNotificationSubscription"],[80,56,52,54],[80,57,52,55,"notificationListener"],[80,77,52,75],[80,78,52,76,"current"],[80,85,52,83],[80,86,52,84],[81,10,53,8],[82,10,54,8],[82,14,54,12,"responseListener"],[82,30,54,28],[82,31,54,29,"current"],[82,38,54,36],[82,40,54,38],[83,12,55,10,"Notifications"],[83,25,55,23],[83,26,55,24,"removeNotificationSubscription"],[83,56,55,54],[83,57,55,55,"responseListener"],[83,73,55,71],[83,74,55,72,"current"],[83,81,55,79],[83,82,55,80],[84,10,56,8],[85,8,57,6],[86,6,58,4],[86,7,58,5],[87,4,59,2],[87,5,59,3],[87,7,59,5],[87,8,59,6,"isAuthenticated"],[87,23,59,21],[87,24,59,22],[87,25,59,23],[88,4,61,2],[88,11,61,9],[89,6,61,11,"expoPushToken"],[89,19,61,24],[90,6,61,26,"notification"],[91,4,61,39],[91,5,61,40],[92,2,62,0],[93,2,64,0],[93,17,64,15,"registerForPushNotificationsAsync"],[93,50,64,48,"registerForPushNotificationsAsync"],[93,51,64,48],[93,53,64,75],[94,4,65,2],[94,8,65,6,"token"],[94,13,65,26],[94,16,65,29],[94,20,65,33],[95,4,67,2],[95,8,67,6,"Platform"],[95,16,67,14],[95,17,67,14,"default"],[95,24,67,14],[95,25,67,15,"OS"],[95,27,67,17],[95,32,67,22],[95,41,67,31],[95,43,67,33],[96,6,68,4],[96,12,68,10,"Notifications"],[96,25,68,23],[96,26,68,24,"setNotificationChannelAsync"],[96,53,68,51],[96,54,68,52],[96,63,68,61],[96,65,68,63],[97,8,69,6,"name"],[97,12,69,10],[97,14,69,12],[97,23,69,21],[98,8,70,6,"importance"],[98,18,70,16],[98,20,70,18,"Notifications"],[98,33,70,31],[98,34,70,32,"AndroidImportance"],[98,51,70,49],[98,52,70,50,"MAX"],[98,55,70,53],[99,8,71,6,"vibrationPattern"],[99,24,71,22],[99,26,71,24],[99,27,71,25],[99,28,71,26],[99,30,71,28],[99,33,71,31],[99,35,71,33],[99,38,71,36],[99,40,71,38],[99,43,71,41],[99,44,71,42],[100,8,72,6,"lightColor"],[100,18,72,16],[100,20,72,18],[101,6,73,4],[101,7,73,5],[101,8,73,6],[102,4,74,2],[103,4,76,2],[103,8,76,6,"Device"],[103,14,76,12],[103,15,76,13,"isDevice"],[103,23,76,21],[103,25,76,23],[104,6,77,4],[104,12,77,10],[105,8,77,12,"status"],[105,14,77,18],[105,16,77,20,"existingStatus"],[106,6,77,35],[106,7,77,36],[106,10,77,39],[106,16,77,45,"Notifications"],[106,29,77,58],[106,30,77,59,"getPermissionsAsync"],[106,49,77,78],[106,50,77,79],[106,51,77,80],[107,6,78,4],[107,10,78,8,"finalStatus"],[107,21,78,19],[107,24,78,22,"existingStatus"],[107,38,78,36],[108,6,80,4],[108,10,80,8,"existingStatus"],[108,24,80,22],[108,29,80,27],[108,38,80,36],[108,40,80,38],[109,8,81,6],[109,14,81,12],[110,10,81,14,"status"],[111,8,81,21],[111,9,81,22],[111,12,81,25],[111,18,81,31,"Notifications"],[111,31,81,44],[111,32,81,45,"requestPermissionsAsync"],[111,55,81,68],[111,56,81,69],[111,57,81,70],[112,8,82,6,"finalStatus"],[112,19,82,17],[112,22,82,20,"status"],[112,28,82,26],[113,6,83,4],[114,6,85,4],[114,10,85,8,"finalStatus"],[114,21,85,19],[114,26,85,24],[114,35,85,33],[114,37,85,35],[115,8,86,6,"console"],[115,15,86,13],[115,16,86,14,"log"],[115,19,86,17],[115,20,86,18],[115,63,86,61],[115,64,86,62],[116,8,87,6],[116,15,87,13],[116,19,87,17],[117,6,88,4],[118,6,90,4],[118,10,90,8],[119,8,91,6],[119,14,91,12,"projectId"],[119,23,91,21],[119,26,91,24,"Constants"],[119,35,91,33],[119,36,91,33,"default"],[119,43,91,33],[119,44,91,34,"expoConfig"],[119,54,91,44],[119,56,91,46,"extra"],[119,61,91,51],[119,63,91,53,"eas"],[119,66,91,56],[119,68,91,58,"projectId"],[119,77,91,67],[120,8,92,6],[120,12,92,10,"projectId"],[120,21,92,19],[120,23,92,21],[121,10,93,8],[121,16,93,14,"pushToken"],[121,25,93,23],[121,28,93,26],[121,34,93,32,"Notifications"],[121,47,93,45],[121,48,93,46,"getExpoPushTokenAsync"],[121,69,93,67],[121,70,93,68],[122,12,93,70,"projectId"],[123,10,93,80],[123,11,93,81],[123,12,93,82],[124,10,94,8,"token"],[124,15,94,13],[124,18,94,16,"pushToken"],[124,27,94,25],[124,28,94,26,"data"],[124,32,94,30],[125,8,95,6],[125,9,95,7],[125,15,95,13],[126,10,96,8],[127,10,97,8],[127,16,97,14,"pushToken"],[127,25,97,23],[127,28,97,26],[127,34,97,32,"Notifications"],[127,47,97,45],[127,48,97,46,"getExpoPushTokenAsync"],[127,69,97,67],[127,70,97,68],[127,71,97,69],[128,10,98,8,"token"],[128,15,98,13],[128,18,98,16,"pushToken"],[128,27,98,25],[128,28,98,26,"data"],[128,32,98,30],[129,8,99,6],[130,6,100,4],[130,7,100,5],[130,8,100,6],[130,15,100,13,"error"],[130,20,100,18],[130,22,100,20],[131,8,101,6,"console"],[131,15,101,13],[131,16,101,14,"log"],[131,19,101,17],[131,20,101,18],[131,47,101,45],[131,49,101,47,"error"],[131,54,101,52],[131,55,101,53],[132,6,102,4],[133,4,103,2],[133,5,103,3],[133,11,103,9],[134,6,104,4,"console"],[134,13,104,11],[134,14,104,12,"log"],[134,17,104,15],[134,18,104,16],[134,67,104,65],[134,68,104,66],[135,4,105,2],[136,4,107,2],[136,11,107,9,"token"],[136,16,107,14],[137,2,108,0],[138,0,108,1],[138,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","usePushNotifications","useEffect$argument_0","registerForPushNotificationsAsync.then$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCQ;IDI;OEG;YCO;6CCC;KDO;iFEE;KFE;qFGE;KHS;WIE;KJU;GDC;CFG;AQE;CR4C"},"hasCjsExports":false},"type":"js/module"}]}