{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":52,"index":105}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":38,"index":144}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":186},"end":{"line":5,"column":39,"index":225}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../stores/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":226},"end":{"line":6,"column":51,"index":277}}],"key":"xZ94Y9XSSJKgtl1T0/yiI2QWZsY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.usePushNotifications = usePushNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storesAuthStore = require(_dependencyMap[5], \"../stores/authStore\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function usePushNotifications() {\n    _s();\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    const {\n      updatePushToken,\n      isAuthenticated\n    } = (0, _storesAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync().then(token => {\n        if (token) {\n          setExpoPushToken(token);\n          if (isAuthenticated) {\n            updatePushToken(token);\n          }\n        }\n      });\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        setNotification(notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n        // Handle navigation based on notification data\n        const data = response.notification.request.content.data;\n        if (data?.event_id) {\n          // Navigate to event\n        } else if (data?.news_id) {\n          // Navigate to news\n        }\n      });\n      return () => {\n        // removeNotificationSubscription is not available on web\n        if (Platform.default.OS !== 'web') {\n          if (notificationListener.current) {\n            Notifications.removeNotificationSubscription(notificationListener.current);\n          }\n          if (responseListener.current) {\n            Notifications.removeNotificationSubscription(responseListener.current);\n          }\n        }\n      };\n    }, [isAuthenticated]);\n    return {\n      expoPushToken,\n      notification\n    };\n  }\n  _s(usePushNotifications, \"LzpulVLlucJ0g2DeM/YIAx9vRzw=\", false, function () {\n    return [_storesAuthStore.useAuthStore];\n  });\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#E63946'\n      });\n    }\n    if (Device.isDevice) {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Push notifications permission not granted');\n        return null;\n      }\n      try {\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (projectId) {\n          const pushToken = await Notifications.getExpoPushTokenAsync({\n            projectId\n          });\n          token = pushToken.data;\n        } else {\n          // Fallback for development\n          const pushToken = await Notifications.getExpoPushTokenAsync();\n          token = pushToken.data;\n        }\n      } catch (error) {\n        console.log('Error getting push token:', error);\n      }\n    } else {\n      console.log('Must use physical device for Push Notifications');\n    }\n    return token;\n  }\n});","lineCount":143,"map":[[28,2,16,0,"exports"],[28,9,16,0],[28,10,16,0,"usePushNotifications"],[28,30,16,0],[28,33,16,0,"usePushNotifications"],[28,53,16,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_expoConstants"],[36,20,5,0],[36,23,5,0,"require"],[36,30,5,0],[36,31,5,0,"_dependencyMap"],[36,45,5,0],[37,2,5,0],[37,6,5,0,"Constants"],[37,15,5,0],[37,18,5,0,"_interopDefault"],[37,33,5,0],[37,34,5,0,"_expoConstants"],[37,48,5,0],[38,2,6,0],[38,6,6,0,"_storesAuthStore"],[38,22,6,0],[38,25,6,0,"require"],[38,32,6,0],[38,33,6,0,"_dependencyMap"],[38,47,6,0],[39,2,8,0,"Notifications"],[39,15,8,13],[39,16,8,14,"setNotificationHandler"],[39,38,8,36],[39,39,8,37],[40,4,9,2,"handleNotification"],[40,22,9,20],[40,24,9,22],[40,30,9,22,"handleNotification"],[40,31,9,22],[40,37,9,35],[41,6,10,4,"shouldShowAlert"],[41,21,10,19],[41,23,10,21],[41,27,10,25],[42,6,11,4,"shouldPlaySound"],[42,21,11,19],[42,23,11,21],[42,27,11,25],[43,6,12,4,"shouldSetBadge"],[43,20,12,18],[43,22,12,20],[44,4,13,2],[44,5,13,3],[45,2,14,0],[45,3,14,1],[45,4,14,2],[46,2,16,7],[46,11,16,16,"usePushNotifications"],[46,31,16,36,"usePushNotifications"],[46,32,16,36],[46,34,16,39],[47,4,16,39,"_s"],[47,6,16,39],[48,4,17,2],[48,10,17,8],[48,11,17,9,"expoPushToken"],[48,24,17,22],[48,26,17,24,"setExpoPushToken"],[48,42,17,40],[48,43,17,41],[48,46,17,44],[48,50,17,44,"useState"],[48,56,17,52],[48,57,17,52,"useState"],[48,65,17,52],[48,67,17,68],[48,71,17,72],[48,72,17,73],[49,4,18,2],[49,10,18,8],[49,11,18,9,"notification"],[49,23,18,21],[49,25,18,23,"setNotification"],[49,40,18,38],[49,41,18,39],[49,44,18,42],[49,48,18,42,"useState"],[49,54,18,50],[49,55,18,50,"useState"],[49,63,18,50],[49,65,18,86],[49,69,18,90],[49,70,18,91],[50,4,19,2],[50,10,19,8,"notificationListener"],[50,30,19,28],[50,33,19,31],[50,37,19,31,"useRef"],[50,43,19,37],[50,44,19,37,"useRef"],[50,50,19,37],[50,52,19,71],[50,53,19,72],[51,4,20,2],[51,10,20,8,"responseListener"],[51,26,20,24],[51,29,20,27],[51,33,20,27,"useRef"],[51,39,20,33],[51,40,20,33,"useRef"],[51,46,20,33],[51,48,20,67],[51,49,20,68],[52,4,21,2],[52,10,21,8],[53,6,21,10,"updatePushToken"],[53,21,21,25],[54,6,21,27,"isAuthenticated"],[55,4,21,43],[55,5,21,44],[55,8,21,47],[55,12,21,47,"useAuthStore"],[55,28,21,59],[55,29,21,59,"useAuthStore"],[55,41,21,59],[55,43,21,60],[55,44,21,61],[56,4,23,2],[56,8,23,2,"useEffect"],[56,14,23,11],[56,15,23,11,"useEffect"],[56,24,23,11],[56,26,23,12],[56,32,23,18],[57,6,24,4,"registerForPushNotificationsAsync"],[57,39,24,37],[57,40,24,38],[57,41,24,39],[57,42,24,40,"then"],[57,46,24,44],[57,47,24,45,"token"],[57,52,24,50],[57,56,24,54],[58,8,25,6],[58,12,25,10,"token"],[58,17,25,15],[58,19,25,17],[59,10,26,8,"setExpoPushToken"],[59,26,26,24],[59,27,26,25,"token"],[59,32,26,30],[59,33,26,31],[60,10,27,8],[60,14,27,12,"isAuthenticated"],[60,29,27,27],[60,31,27,29],[61,12,28,10,"updatePushToken"],[61,27,28,25],[61,28,28,26,"token"],[61,33,28,31],[61,34,28,32],[62,10,29,8],[63,8,30,6],[64,6,31,4],[64,7,31,5],[64,8,31,6],[65,6,33,4,"notificationListener"],[65,26,33,24],[65,27,33,25,"current"],[65,34,33,32],[65,37,33,35,"Notifications"],[65,50,33,48],[65,51,33,49,"addNotificationReceivedListener"],[65,82,33,80],[65,83,33,81,"notification"],[65,95,33,93],[65,99,33,97],[66,8,34,6,"setNotification"],[66,23,34,21],[66,24,34,22,"notification"],[66,36,34,34],[66,37,34,35],[67,6,35,4],[67,7,35,5],[67,8,35,6],[68,6,37,4,"responseListener"],[68,22,37,20],[68,23,37,21,"current"],[68,30,37,28],[68,33,37,31,"Notifications"],[68,46,37,44],[68,47,37,45,"addNotificationResponseReceivedListener"],[68,86,37,84],[68,87,37,85,"response"],[68,95,37,93],[68,99,37,97],[69,8,38,6,"console"],[69,15,38,13],[69,16,38,14,"log"],[69,19,38,17],[69,20,38,18],[69,44,38,42],[69,46,38,44,"response"],[69,54,38,52],[69,55,38,53],[70,8,39,6],[71,8,40,6],[71,14,40,12,"data"],[71,18,40,16],[71,21,40,19,"response"],[71,29,40,27],[71,30,40,28,"notification"],[71,42,40,40],[71,43,40,41,"request"],[71,50,40,48],[71,51,40,49,"content"],[71,58,40,56],[71,59,40,57,"data"],[71,63,40,61],[72,8,41,6],[72,12,41,10,"data"],[72,16,41,14],[72,18,41,16,"event_id"],[72,26,41,24],[72,28,41,26],[73,10,42,8],[74,8,42,8],[74,9,43,7],[74,15,43,13],[74,19,43,17,"data"],[74,23,43,21],[74,25,43,23,"news_id"],[74,32,43,30],[74,34,43,32],[75,10,44,8],[76,8,44,8],[77,6,46,4],[77,7,46,5],[77,8,46,6],[78,6,48,4],[78,13,48,11],[78,19,48,17],[79,8,49,6],[80,8,50,6],[80,12,50,10,"Platform"],[80,20,50,18],[80,21,50,18,"default"],[80,28,50,18],[80,29,50,19,"OS"],[80,31,50,21],[80,36,50,26],[80,41,50,31],[80,43,50,33],[81,10,51,8],[81,14,51,12,"notificationListener"],[81,34,51,32],[81,35,51,33,"current"],[81,42,51,40],[81,44,51,42],[82,12,52,10,"Notifications"],[82,25,52,23],[82,26,52,24,"removeNotificationSubscription"],[82,56,52,54],[82,57,52,55,"notificationListener"],[82,77,52,75],[82,78,52,76,"current"],[82,85,52,83],[82,86,52,84],[83,10,53,8],[84,10,54,8],[84,14,54,12,"responseListener"],[84,30,54,28],[84,31,54,29,"current"],[84,38,54,36],[84,40,54,38],[85,12,55,10,"Notifications"],[85,25,55,23],[85,26,55,24,"removeNotificationSubscription"],[85,56,55,54],[85,57,55,55,"responseListener"],[85,73,55,71],[85,74,55,72,"current"],[85,81,55,79],[85,82,55,80],[86,10,56,8],[87,8,57,6],[88,6,58,4],[88,7,58,5],[89,4,59,2],[89,5,59,3],[89,7,59,5],[89,8,59,6,"isAuthenticated"],[89,23,59,21],[89,24,59,22],[89,25,59,23],[90,4,61,2],[90,11,61,9],[91,6,61,11,"expoPushToken"],[91,19,61,24],[92,6,61,26,"notification"],[93,4,61,39],[93,5,61,40],[94,2,62,0],[95,2,62,1,"_s"],[95,4,62,1],[95,5,16,16,"usePushNotifications"],[95,25,16,36],[96,4,16,36],[96,12,21,47,"useAuthStore"],[96,28,21,59],[96,29,21,59,"useAuthStore"],[96,41,21,59],[97,2,21,59],[98,2,64,0],[98,17,64,15,"registerForPushNotificationsAsync"],[98,50,64,48,"registerForPushNotificationsAsync"],[98,51,64,48],[98,53,64,75],[99,4,65,2],[99,8,65,6,"token"],[99,13,65,26],[99,16,65,29],[99,20,65,33],[100,4,67,2],[100,8,67,6,"Platform"],[100,16,67,14],[100,17,67,14,"default"],[100,24,67,14],[100,25,67,15,"OS"],[100,27,67,17],[100,32,67,22],[100,41,67,31],[100,43,67,33],[101,6,68,4],[101,12,68,10,"Notifications"],[101,25,68,23],[101,26,68,24,"setNotificationChannelAsync"],[101,53,68,51],[101,54,68,52],[101,63,68,61],[101,65,68,63],[102,8,69,6,"name"],[102,12,69,10],[102,14,69,12],[102,23,69,21],[103,8,70,6,"importance"],[103,18,70,16],[103,20,70,18,"Notifications"],[103,33,70,31],[103,34,70,32,"AndroidImportance"],[103,51,70,49],[103,52,70,50,"MAX"],[103,55,70,53],[104,8,71,6,"vibrationPattern"],[104,24,71,22],[104,26,71,24],[104,27,71,25],[104,28,71,26],[104,30,71,28],[104,33,71,31],[104,35,71,33],[104,38,71,36],[104,40,71,38],[104,43,71,41],[104,44,71,42],[105,8,72,6,"lightColor"],[105,18,72,16],[105,20,72,18],[106,6,73,4],[106,7,73,5],[106,8,73,6],[107,4,74,2],[108,4,76,2],[108,8,76,6,"Device"],[108,14,76,12],[108,15,76,13,"isDevice"],[108,23,76,21],[108,25,76,23],[109,6,77,4],[109,12,77,10],[110,8,77,12,"status"],[110,14,77,18],[110,16,77,20,"existingStatus"],[111,6,77,35],[111,7,77,36],[111,10,77,39],[111,16,77,45,"Notifications"],[111,29,77,58],[111,30,77,59,"getPermissionsAsync"],[111,49,77,78],[111,50,77,79],[111,51,77,80],[112,6,78,4],[112,10,78,8,"finalStatus"],[112,21,78,19],[112,24,78,22,"existingStatus"],[112,38,78,36],[113,6,80,4],[113,10,80,8,"existingStatus"],[113,24,80,22],[113,29,80,27],[113,38,80,36],[113,40,80,38],[114,8,81,6],[114,14,81,12],[115,10,81,14,"status"],[116,8,81,21],[116,9,81,22],[116,12,81,25],[116,18,81,31,"Notifications"],[116,31,81,44],[116,32,81,45,"requestPermissionsAsync"],[116,55,81,68],[116,56,81,69],[116,57,81,70],[117,8,82,6,"finalStatus"],[117,19,82,17],[117,22,82,20,"status"],[117,28,82,26],[118,6,83,4],[119,6,85,4],[119,10,85,8,"finalStatus"],[119,21,85,19],[119,26,85,24],[119,35,85,33],[119,37,85,35],[120,8,86,6,"console"],[120,15,86,13],[120,16,86,14,"log"],[120,19,86,17],[120,20,86,18],[120,63,86,61],[120,64,86,62],[121,8,87,6],[121,15,87,13],[121,19,87,17],[122,6,88,4],[123,6,90,4],[123,10,90,8],[124,8,91,6],[124,14,91,12,"projectId"],[124,23,91,21],[124,26,91,24,"Constants"],[124,35,91,33],[124,36,91,33,"default"],[124,43,91,33],[124,44,91,34,"expoConfig"],[124,54,91,44],[124,56,91,46,"extra"],[124,61,91,51],[124,63,91,53,"eas"],[124,66,91,56],[124,68,91,58,"projectId"],[124,77,91,67],[125,8,92,6],[125,12,92,10,"projectId"],[125,21,92,19],[125,23,92,21],[126,10,93,8],[126,16,93,14,"pushToken"],[126,25,93,23],[126,28,93,26],[126,34,93,32,"Notifications"],[126,47,93,45],[126,48,93,46,"getExpoPushTokenAsync"],[126,69,93,67],[126,70,93,68],[127,12,93,70,"projectId"],[128,10,93,80],[128,11,93,81],[128,12,93,82],[129,10,94,8,"token"],[129,15,94,13],[129,18,94,16,"pushToken"],[129,27,94,25],[129,28,94,26,"data"],[129,32,94,30],[130,8,95,6],[130,9,95,7],[130,15,95,13],[131,10,96,8],[132,10,97,8],[132,16,97,14,"pushToken"],[132,25,97,23],[132,28,97,26],[132,34,97,32,"Notifications"],[132,47,97,45],[132,48,97,46,"getExpoPushTokenAsync"],[132,69,97,67],[132,70,97,68],[132,71,97,69],[133,10,98,8,"token"],[133,15,98,13],[133,18,98,16,"pushToken"],[133,27,98,25],[133,28,98,26,"data"],[133,32,98,30],[134,8,99,6],[135,6,100,4],[135,7,100,5],[135,8,100,6],[135,15,100,13,"error"],[135,20,100,18],[135,22,100,20],[136,8,101,6,"console"],[136,15,101,13],[136,16,101,14,"log"],[136,19,101,17],[136,20,101,18],[136,47,101,45],[136,49,101,47,"error"],[136,54,101,52],[136,55,101,53],[137,6,102,4],[138,4,103,2],[138,5,103,3],[138,11,103,9],[139,6,104,4,"console"],[139,13,104,11],[139,14,104,12,"log"],[139,17,104,15],[139,18,104,16],[139,67,104,65],[139,68,104,66],[140,4,105,2],[141,4,107,2],[141,11,107,9,"token"],[141,16,107,14],[142,2,108,0],[143,0,108,1],[143,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","usePushNotifications","useEffect$argument_0","registerForPushNotificationsAsync.then$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCQ;IDI;OEG;YCO;6CCC;KDO;iFEE;KFE;qFGE;KHS;WIE;KJU;GDC;CFG;AQE;CR4C"},"hasCjsExports":false},"type":"js/module"}]}