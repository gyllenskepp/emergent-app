{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":52,"index":105}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":38,"index":144}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":186},"end":{"line":5,"column":39,"index":225}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../stores/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":226},"end":{"line":6,"column":51,"index":277}}],"key":"xZ94Y9XSSJKgtl1T0/yiI2QWZsY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.usePushNotifications = usePushNotifications;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[4], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _storesAuthStore = require(_dependencyMap[5], \"../stores/authStore\");\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  function usePushNotifications() {\n    _s();\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    const notificationListener = (0, _react.useRef)();\n    const responseListener = (0, _react.useRef)();\n    const {\n      updatePushToken,\n      isAuthenticated\n    } = (0, _storesAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      registerForPushNotificationsAsync().then(token => {\n        if (token) {\n          setExpoPushToken(token);\n          if (isAuthenticated) {\n            updatePushToken(token);\n          }\n        }\n      });\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        setNotification(notification);\n      });\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n        // Handle navigation based on notification data\n        const data = response.notification.request.content.data;\n        if (data?.event_id) {\n          // Navigate to event\n        } else if (data?.news_id) {\n          // Navigate to news\n        }\n      });\n      return () => {\n        if (notificationListener.current) {\n          Notifications.removeNotificationSubscription(notificationListener.current);\n        }\n        if (responseListener.current) {\n          Notifications.removeNotificationSubscription(responseListener.current);\n        }\n      };\n    }, [isAuthenticated]);\n    return {\n      expoPushToken,\n      notification\n    };\n  }\n  _s(usePushNotifications, \"LzpulVLlucJ0g2DeM/YIAx9vRzw=\", false, function () {\n    return [_storesAuthStore.useAuthStore];\n  });\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'android') {\n      await Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#E63946'\n      });\n    }\n    if (Device.isDevice) {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Push notifications permission not granted');\n        return null;\n      }\n      try {\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (projectId) {\n          const pushToken = await Notifications.getExpoPushTokenAsync({\n            projectId\n          });\n          token = pushToken.data;\n        } else {\n          // Fallback for development\n          const pushToken = await Notifications.getExpoPushTokenAsync();\n          token = pushToken.data;\n        }\n      } catch (error) {\n        console.log('Error getting push token:', error);\n      }\n    } else {\n      console.log('Must use physical device for Push Notifications');\n    }\n    return token;\n  }\n});","lineCount":140,"map":[[28,2,16,0,"exports"],[28,9,16,0],[28,10,16,0,"usePushNotifications"],[28,30,16,0],[28,33,16,0,"usePushNotifications"],[28,53,16,0],[29,2,1,0],[29,6,1,0,"_react"],[29,12,1,0],[29,15,1,0,"require"],[29,22,1,0],[29,23,1,0,"_dependencyMap"],[29,37,1,0],[30,2,2,0],[30,6,2,0,"_expoNotifications"],[30,24,2,0],[30,27,2,0,"require"],[30,34,2,0],[30,35,2,0,"_dependencyMap"],[30,49,2,0],[31,2,2,0],[31,6,2,0,"Notifications"],[31,19,2,0],[31,22,2,0,"_interopNamespace"],[31,39,2,0],[31,40,2,0,"_expoNotifications"],[31,58,2,0],[32,2,3,0],[32,6,3,0,"_expoDevice"],[32,17,3,0],[32,20,3,0,"require"],[32,27,3,0],[32,28,3,0,"_dependencyMap"],[32,42,3,0],[33,2,3,0],[33,6,3,0,"Device"],[33,12,3,0],[33,15,3,0,"_interopNamespace"],[33,32,3,0],[33,33,3,0,"_expoDevice"],[33,44,3,0],[34,2,3,38],[34,6,3,38,"_reactNativeWebDistExportsPlatform"],[34,40,3,38],[34,43,3,38,"require"],[34,50,3,38],[34,51,3,38,"_dependencyMap"],[34,65,3,38],[35,2,3,38],[35,6,3,38,"Platform"],[35,14,3,38],[35,17,3,38,"_interopDefault"],[35,32,3,38],[35,33,3,38,"_reactNativeWebDistExportsPlatform"],[35,67,3,38],[36,2,5,0],[36,6,5,0,"_expoConstants"],[36,20,5,0],[36,23,5,0,"require"],[36,30,5,0],[36,31,5,0,"_dependencyMap"],[36,45,5,0],[37,2,5,0],[37,6,5,0,"Constants"],[37,15,5,0],[37,18,5,0,"_interopDefault"],[37,33,5,0],[37,34,5,0,"_expoConstants"],[37,48,5,0],[38,2,6,0],[38,6,6,0,"_storesAuthStore"],[38,22,6,0],[38,25,6,0,"require"],[38,32,6,0],[38,33,6,0,"_dependencyMap"],[38,47,6,0],[39,2,8,0,"Notifications"],[39,15,8,13],[39,16,8,14,"setNotificationHandler"],[39,38,8,36],[39,39,8,37],[40,4,9,2,"handleNotification"],[40,22,9,20],[40,24,9,22],[40,30,9,22,"handleNotification"],[40,31,9,22],[40,37,9,35],[41,6,10,4,"shouldShowAlert"],[41,21,10,19],[41,23,10,21],[41,27,10,25],[42,6,11,4,"shouldPlaySound"],[42,21,11,19],[42,23,11,21],[42,27,11,25],[43,6,12,4,"shouldSetBadge"],[43,20,12,18],[43,22,12,20],[44,4,13,2],[44,5,13,3],[45,2,14,0],[45,3,14,1],[45,4,14,2],[46,2,16,7],[46,11,16,16,"usePushNotifications"],[46,31,16,36,"usePushNotifications"],[46,32,16,36],[46,34,16,39],[47,4,16,39,"_s"],[47,6,16,39],[48,4,17,2],[48,10,17,8],[48,11,17,9,"expoPushToken"],[48,24,17,22],[48,26,17,24,"setExpoPushToken"],[48,42,17,40],[48,43,17,41],[48,46,17,44],[48,50,17,44,"useState"],[48,56,17,52],[48,57,17,52,"useState"],[48,65,17,52],[48,67,17,68],[48,71,17,72],[48,72,17,73],[49,4,18,2],[49,10,18,8],[49,11,18,9,"notification"],[49,23,18,21],[49,25,18,23,"setNotification"],[49,40,18,38],[49,41,18,39],[49,44,18,42],[49,48,18,42,"useState"],[49,54,18,50],[49,55,18,50,"useState"],[49,63,18,50],[49,65,18,86],[49,69,18,90],[49,70,18,91],[50,4,19,2],[50,10,19,8,"notificationListener"],[50,30,19,28],[50,33,19,31],[50,37,19,31,"useRef"],[50,43,19,37],[50,44,19,37,"useRef"],[50,50,19,37],[50,52,19,71],[50,53,19,72],[51,4,20,2],[51,10,20,8,"responseListener"],[51,26,20,24],[51,29,20,27],[51,33,20,27,"useRef"],[51,39,20,33],[51,40,20,33,"useRef"],[51,46,20,33],[51,48,20,67],[51,49,20,68],[52,4,21,2],[52,10,21,8],[53,6,21,10,"updatePushToken"],[53,21,21,25],[54,6,21,27,"isAuthenticated"],[55,4,21,43],[55,5,21,44],[55,8,21,47],[55,12,21,47,"useAuthStore"],[55,28,21,59],[55,29,21,59,"useAuthStore"],[55,41,21,59],[55,43,21,60],[55,44,21,61],[56,4,23,2],[56,8,23,2,"useEffect"],[56,14,23,11],[56,15,23,11,"useEffect"],[56,24,23,11],[56,26,23,12],[56,32,23,18],[57,6,24,4,"registerForPushNotificationsAsync"],[57,39,24,37],[57,40,24,38],[57,41,24,39],[57,42,24,40,"then"],[57,46,24,44],[57,47,24,45,"token"],[57,52,24,50],[57,56,24,54],[58,8,25,6],[58,12,25,10,"token"],[58,17,25,15],[58,19,25,17],[59,10,26,8,"setExpoPushToken"],[59,26,26,24],[59,27,26,25,"token"],[59,32,26,30],[59,33,26,31],[60,10,27,8],[60,14,27,12,"isAuthenticated"],[60,29,27,27],[60,31,27,29],[61,12,28,10,"updatePushToken"],[61,27,28,25],[61,28,28,26,"token"],[61,33,28,31],[61,34,28,32],[62,10,29,8],[63,8,30,6],[64,6,31,4],[64,7,31,5],[64,8,31,6],[65,6,33,4,"notificationListener"],[65,26,33,24],[65,27,33,25,"current"],[65,34,33,32],[65,37,33,35,"Notifications"],[65,50,33,48],[65,51,33,49,"addNotificationReceivedListener"],[65,82,33,80],[65,83,33,81,"notification"],[65,95,33,93],[65,99,33,97],[66,8,34,6,"setNotification"],[66,23,34,21],[66,24,34,22,"notification"],[66,36,34,34],[66,37,34,35],[67,6,35,4],[67,7,35,5],[67,8,35,6],[68,6,37,4,"responseListener"],[68,22,37,20],[68,23,37,21,"current"],[68,30,37,28],[68,33,37,31,"Notifications"],[68,46,37,44],[68,47,37,45,"addNotificationResponseReceivedListener"],[68,86,37,84],[68,87,37,85,"response"],[68,95,37,93],[68,99,37,97],[69,8,38,6,"console"],[69,15,38,13],[69,16,38,14,"log"],[69,19,38,17],[69,20,38,18],[69,44,38,42],[69,46,38,44,"response"],[69,54,38,52],[69,55,38,53],[70,8,39,6],[71,8,40,6],[71,14,40,12,"data"],[71,18,40,16],[71,21,40,19,"response"],[71,29,40,27],[71,30,40,28,"notification"],[71,42,40,40],[71,43,40,41,"request"],[71,50,40,48],[71,51,40,49,"content"],[71,58,40,56],[71,59,40,57,"data"],[71,63,40,61],[72,8,41,6],[72,12,41,10,"data"],[72,16,41,14],[72,18,41,16,"event_id"],[72,26,41,24],[72,28,41,26],[73,10,42,8],[74,8,42,8],[74,9,43,7],[74,15,43,13],[74,19,43,17,"data"],[74,23,43,21],[74,25,43,23,"news_id"],[74,32,43,30],[74,34,43,32],[75,10,44,8],[76,8,44,8],[77,6,46,4],[77,7,46,5],[77,8,46,6],[78,6,48,4],[78,13,48,11],[78,19,48,17],[79,8,49,6],[79,12,49,10,"notificationListener"],[79,32,49,30],[79,33,49,31,"current"],[79,40,49,38],[79,42,49,40],[80,10,50,8,"Notifications"],[80,23,50,21],[80,24,50,22,"removeNotificationSubscription"],[80,54,50,52],[80,55,50,53,"notificationListener"],[80,75,50,73],[80,76,50,74,"current"],[80,83,50,81],[80,84,50,82],[81,8,51,6],[82,8,52,6],[82,12,52,10,"responseListener"],[82,28,52,26],[82,29,52,27,"current"],[82,36,52,34],[82,38,52,36],[83,10,53,8,"Notifications"],[83,23,53,21],[83,24,53,22,"removeNotificationSubscription"],[83,54,53,52],[83,55,53,53,"responseListener"],[83,71,53,69],[83,72,53,70,"current"],[83,79,53,77],[83,80,53,78],[84,8,54,6],[85,6,55,4],[85,7,55,5],[86,4,56,2],[86,5,56,3],[86,7,56,5],[86,8,56,6,"isAuthenticated"],[86,23,56,21],[86,24,56,22],[86,25,56,23],[87,4,58,2],[87,11,58,9],[88,6,58,11,"expoPushToken"],[88,19,58,24],[89,6,58,26,"notification"],[90,4,58,39],[90,5,58,40],[91,2,59,0],[92,2,59,1,"_s"],[92,4,59,1],[92,5,16,16,"usePushNotifications"],[92,25,16,36],[93,4,16,36],[93,12,21,47,"useAuthStore"],[93,28,21,59],[93,29,21,59,"useAuthStore"],[93,41,21,59],[94,2,21,59],[95,2,61,0],[95,17,61,15,"registerForPushNotificationsAsync"],[95,50,61,48,"registerForPushNotificationsAsync"],[95,51,61,48],[95,53,61,75],[96,4,62,2],[96,8,62,6,"token"],[96,13,62,26],[96,16,62,29],[96,20,62,33],[97,4,64,2],[97,8,64,6,"Platform"],[97,16,64,14],[97,17,64,14,"default"],[97,24,64,14],[97,25,64,15,"OS"],[97,27,64,17],[97,32,64,22],[97,41,64,31],[97,43,64,33],[98,6,65,4],[98,12,65,10,"Notifications"],[98,25,65,23],[98,26,65,24,"setNotificationChannelAsync"],[98,53,65,51],[98,54,65,52],[98,63,65,61],[98,65,65,63],[99,8,66,6,"name"],[99,12,66,10],[99,14,66,12],[99,23,66,21],[100,8,67,6,"importance"],[100,18,67,16],[100,20,67,18,"Notifications"],[100,33,67,31],[100,34,67,32,"AndroidImportance"],[100,51,67,49],[100,52,67,50,"MAX"],[100,55,67,53],[101,8,68,6,"vibrationPattern"],[101,24,68,22],[101,26,68,24],[101,27,68,25],[101,28,68,26],[101,30,68,28],[101,33,68,31],[101,35,68,33],[101,38,68,36],[101,40,68,38],[101,43,68,41],[101,44,68,42],[102,8,69,6,"lightColor"],[102,18,69,16],[102,20,69,18],[103,6,70,4],[103,7,70,5],[103,8,70,6],[104,4,71,2],[105,4,73,2],[105,8,73,6,"Device"],[105,14,73,12],[105,15,73,13,"isDevice"],[105,23,73,21],[105,25,73,23],[106,6,74,4],[106,12,74,10],[107,8,74,12,"status"],[107,14,74,18],[107,16,74,20,"existingStatus"],[108,6,74,35],[108,7,74,36],[108,10,74,39],[108,16,74,45,"Notifications"],[108,29,74,58],[108,30,74,59,"getPermissionsAsync"],[108,49,74,78],[108,50,74,79],[108,51,74,80],[109,6,75,4],[109,10,75,8,"finalStatus"],[109,21,75,19],[109,24,75,22,"existingStatus"],[109,38,75,36],[110,6,77,4],[110,10,77,8,"existingStatus"],[110,24,77,22],[110,29,77,27],[110,38,77,36],[110,40,77,38],[111,8,78,6],[111,14,78,12],[112,10,78,14,"status"],[113,8,78,21],[113,9,78,22],[113,12,78,25],[113,18,78,31,"Notifications"],[113,31,78,44],[113,32,78,45,"requestPermissionsAsync"],[113,55,78,68],[113,56,78,69],[113,57,78,70],[114,8,79,6,"finalStatus"],[114,19,79,17],[114,22,79,20,"status"],[114,28,79,26],[115,6,80,4],[116,6,82,4],[116,10,82,8,"finalStatus"],[116,21,82,19],[116,26,82,24],[116,35,82,33],[116,37,82,35],[117,8,83,6,"console"],[117,15,83,13],[117,16,83,14,"log"],[117,19,83,17],[117,20,83,18],[117,63,83,61],[117,64,83,62],[118,8,84,6],[118,15,84,13],[118,19,84,17],[119,6,85,4],[120,6,87,4],[120,10,87,8],[121,8,88,6],[121,14,88,12,"projectId"],[121,23,88,21],[121,26,88,24,"Constants"],[121,35,88,33],[121,36,88,33,"default"],[121,43,88,33],[121,44,88,34,"expoConfig"],[121,54,88,44],[121,56,88,46,"extra"],[121,61,88,51],[121,63,88,53,"eas"],[121,66,88,56],[121,68,88,58,"projectId"],[121,77,88,67],[122,8,89,6],[122,12,89,10,"projectId"],[122,21,89,19],[122,23,89,21],[123,10,90,8],[123,16,90,14,"pushToken"],[123,25,90,23],[123,28,90,26],[123,34,90,32,"Notifications"],[123,47,90,45],[123,48,90,46,"getExpoPushTokenAsync"],[123,69,90,67],[123,70,90,68],[124,12,90,70,"projectId"],[125,10,90,80],[125,11,90,81],[125,12,90,82],[126,10,91,8,"token"],[126,15,91,13],[126,18,91,16,"pushToken"],[126,27,91,25],[126,28,91,26,"data"],[126,32,91,30],[127,8,92,6],[127,9,92,7],[127,15,92,13],[128,10,93,8],[129,10,94,8],[129,16,94,14,"pushToken"],[129,25,94,23],[129,28,94,26],[129,34,94,32,"Notifications"],[129,47,94,45],[129,48,94,46,"getExpoPushTokenAsync"],[129,69,94,67],[129,70,94,68],[129,71,94,69],[130,10,95,8,"token"],[130,15,95,13],[130,18,95,16,"pushToken"],[130,27,95,25],[130,28,95,26,"data"],[130,32,95,30],[131,8,96,6],[132,6,97,4],[132,7,97,5],[132,8,97,6],[132,15,97,13,"error"],[132,20,97,18],[132,22,97,20],[133,8,98,6,"console"],[133,15,98,13],[133,16,98,14,"log"],[133,19,98,17],[133,20,98,18],[133,47,98,45],[133,49,98,47,"error"],[133,54,98,52],[133,55,98,53],[134,6,99,4],[135,4,100,2],[135,5,100,3],[135,11,100,9],[136,6,101,4,"console"],[136,13,101,11],[136,14,101,12,"log"],[136,17,101,15],[136,18,101,16],[136,67,101,65],[136,68,101,66],[137,4,102,2],[138,4,104,2],[138,11,104,9,"token"],[138,16,104,14],[139,2,105,0],[140,0,105,1],[140,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","usePushNotifications","useEffect$argument_0","registerForPushNotificationsAsync.then$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotificationsAsync"],"mappings":"AAA;sBCQ;IDI;OEG;YCO;6CCC;KDO;iFEE;KFE;qFGE;KHS;WIE;KJO;GDC;CFG;AQE;CR4C"},"hasCjsExports":false},"type":"js/module"}]}